I can identify at least two security vulnerabilities that I fixed with the refactored code: 
The first is query parameterization, which prevents SQL Injection by blocking malicious scripts from being executed by the database. 
Additionally, I implemented validation for the inserted username field.
